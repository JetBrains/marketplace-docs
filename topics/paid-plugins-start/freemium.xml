<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE topic
        SYSTEM "https://resources.jetbrains.com/stardust/html-entities.dtd">
<topic xsi:noNamespaceSchemaLocation="https://resources.jetbrains.com/stardust/topic.v2.xsd"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       title="Freemium plugins"
       id="freemium">

    <p>Freemium plugins offer some features at no cost in addition to paid features. The reasons for implementing this
        model can be different, from helping you attract new users, or simply making some profit without going fully
        paid.
    </p>
    <note>
        <p>If you're switching the payment model from free to freemium, please <a
                href="inform-your-users-in-advance.xml">inform your users in advance</a>.
        </p>
    </note>

    <chapter title="How does it look for users?"
             id="how-does-it-look"
             level="3"/>

    <p>Users will see an explanatory note under the <control>Get</control> button that informs them about paid features.
    </p>

    <img src="free-paid-example.png" alt="An example of how the tag looks like" width="2108"/>

    <p>Starting from 213.* version of IDE, such plugins are marked with the <code>Freemium</code> tag and the <emphasis>
        “Install a
        version with limited functionality for free or activate the 30-day trial for full access”
    </emphasis> note:
    </p>

    <img src="ide-freemium.png" alt="Freemium tag in IDE" width="1636"/>

    <p>While they have the <code>Freemium</code> tag along with the <code>Paid</code> tag in the older IDE versions:
    </p>

    <img src="old-ide-freemium.png" alt="Freemium tag in old IDEs" width="1282"/>

    <chapter title="How to make your plugin freemium?"
             id="how-to-make-your-plugin-freemium"
             level="3"/>

    <list type="decimal">
        <li>
            <control>Submit the request and create a product code</control>
            <p>
                <a href="submit-a-request-to-sell-plugins-at-the-marketplace.xml">Submit a request</a>
                by using the <a
                    href="https://plugins.jetbrains.com/build-and-market#form">Apply to Marketplace
            </a> form. After that, you will be contacted by our vendor success team via email with further steps. One of
                these steps is to create a <a href="obtain-a-product-code-from-jetbrains.xml">Product Code</a> and
                provide it in the reply.
            </p>
        </li>
        <li>
            <p>
                <control>Prepare your plugin</control>
            </p>
            <p>Make the following changes to your code to prepare your plugin for publishing:</p>
            <chapter title="Define additional parameters"
                     id="define_additional_parameters"
                     initial-collapse-state="collapsed"
                     hide-from-structure="true"
                     level="5">
                <procedure>
                    <p>You must define the following parameters in the plugin descriptor (<path>plugin.xml</path>):
                    </p>
                    <code style="block" lang="XML" title="Parameters">product-descriptor code="PPAIDPLUGIN"
                        release-date="20201225" release-version="20201" optional="true"
                    </code>
                    <p>More information on these additional parameters can be found <a
                            href="add-required-parameters.xml">here</a>.
                    </p>
                    <p>Make sure the <code lang="XML">optional</code> parameter in product-descriptor is set
                        to <control>true</control>. Thanks to this optional attribute, the IDE will not check for a
                        license on IDE startup, which allows us to install the plugin and start using it.
                    </p>
                    <warning>
                        <p>The <code lang="XML">optional</code> parameter can be set only once, with
                            the first uploaded plugin version containing this parameter. So, you need to choose between
                            freemium and fully paid models <emphasis>before</emphasis> uploading the first paid plugin
                            version, as it can't
                            be changed later.
                        </p>
                    </warning>
                </procedure>
            </chapter>
            <chapter title="Implement license method"
                     id="implement_license_method"
                     initial-collapse-state="collapsed"
                     hide-from-structure="true"
                     level="5">
                <procedure>
                    <p>It is up to the plugin developers to decide exactly what functionality will be available for free
                        and what will require a license. To do that, please implement the <code>requestLicense</code> method
                        that checks if a license has been obtained when the paid functionality is called.
                    </p>
                    <p>Please refer to this example <a
                            href="https://github.com/JetBrains/marketplace-makemecoffee-plugin">plugin
                    </a> with product parameter declarations, as well as a license check:
                    </p>
                    <p>
                        <a href="https://github.com/JetBrains/marketplace-makemecoffee-plugin/blob/master/src/main/java/com/company/license/CheckLicense.java">
                            CheckLicense
                        </a>
                    </p>
                    <p>
                        <a href="https://github.com/JetBrains/marketplace-makemecoffee-plugin/blob/master/src/main/java/actions/MakeCoffeeAction.java">
                            Action
                        </a>
                    </p>
                    <p>If a license is not activated, the <code lang="XML">requestLicense</code> method can open the
                        Register dialog and prompt the user to activate the license. Alternatively, you can add a button
                        in the menu to activate the plugin using this <code lang="XML">requestLicense</code> method or
                        come up with your own way of using the method.
                    </p>
                    <p>You can see the usage of this method in our <a
                            href="https://github.com/JetBrains/marketplace-makemecoffee-plugin/blob/51208c42e2692cee1843595f345a2319caa5660a/src/main/java/actions/MakeCoffeeAction.java#L81">
                        demo plugin</a>.
                    </p>
                </procedure>
            </chapter>
        </li>
        <li>
            <p>
                <control>Upload and Release</control>
            </p>
            <p>The process of publishing is the same as for paid plugins. Please refer to this guide on <a
                    href="uploading-a-new-plugin.xml">how to upload
            </a> and <a href="release-plugin.xml">release your plugin</a>.
            </p>
        </li>
    </list>


</topic>